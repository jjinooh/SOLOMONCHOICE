<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>솔로몬의 선택: 내 연애 성향은 에겐? 테토?</title>
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script>
      Kakao.init('c2788857d449e26583d58b707ee0abb0'); // 호호님이 제공해주신 JavaScript 키
    </script>

    <style>
        /* 기본 폰트와 스타일 */
        body {
            font-family: "Arial", "Noto Sans KR", sans-serif; /* Noto Sans KR 추가 */
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            text-align: center;
            color: #333;
            display: flex; /* 화면 중앙 정렬을 위해 body에도 flex 적용 */
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* 최소 높이 설정 (화면 전체 높이) */
        }
        /* 공통 컨테이너 스타일 - 정사각형 크기 */
        .container {
            background: #fff;
            margin: 20px auto; /* 상하 마진 조정 */
            width: 420px;
            height: 420px;
            overflow-y: auto; /* 내용이 넘칠 때 스크롤 */
            padding: 70px 20px 30px 20px;
            box-sizing: border-box;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: none; /* JS로 제어 */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        /* 페이지 제목 스타일 */
        .page-title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 40px);
            text-align: center;
            font-size: 16px; /* 글씨 크기 줄임 */
            color: #e1326f;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            z-index: 10;
        }

        /* 인트로 화면 */
        #intro {
            display: flex; /* 초기에는 인트로 화면을 표시 */
        }
        h1 {
            font-size: 18px; /* 제목 크기 줄임 */
            margin-bottom: 10px;
        }
        /* 본문 p 태그 스타일 */
        p {
            font-size: 13px; /* 기본 문단 글씨 크기 줄임 */
            line-height: 1.4; /* 줄 간격 조정 */
            margin-bottom: 15px; /* 기본 여백 */
        }

        /* 질문 화면 */
        .question-container {
            text-align: left; /* 질문과 옵션은 왼쪽 정렬 */
            padding-top: 50px; /* 제목과 겹치지 않도록 조정 */
        }
        .question {
            font-size: 18px; /* 질문 텍스트 크기 줄임 */
            font-weight: bold;
            margin-bottom: 15px; /* 여백 조정 */
            line-height: 1.4;
        }
        .options {
            margin-bottom: 20px; /* 옵션 컨테이너 여백 */
        }
        .option {
            display: block;
            background-color: #f1f1f1;
            border-radius: 5px; /* 좀 더 둥근 모서리 */
            padding: 10px 15px; /* 패딩 조정 */
            margin-bottom: 8px; /* 옵션 간 간격 */
            font-size: 13px; /* 옵션 글씨 크기 줄임 */
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        .option:hover {
            background-color: #e6e6e6;
            transform: translateY(-1px);
        }
        .option.selected {
            background-color: #ff8dc7;
            color: white;
            font-weight: bold;
            border: 1px solid #ff1493;
        }
        /* 버튼 스타일 */
        button {
            background-color: #ff3c7e;
            color: white;
            border: none;
            padding: 8px 16px; /* 버튼 패딩 줄임 */
            font-size: 13px; /* 버튼 글씨 크기 줄임 */
            border-radius: 20px;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #e1326f;
        }
        .start-btn {
            padding: 10px 20px; /* 시작 버튼은 좀 더 크게 */
            font-size: 14px;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 15px; /* 네비게이션 버튼 위 여백 */
        }
        .prev-btn, .next-btn {
            flex-grow: 1; /* 너비를 동일하게 */
            margin: 0 5px; /* 버튼 사이 간격 */
        }
        .prev-btn:disabled, .next-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* 결과 화면 */
        .result-title {
            font-size: 18px; /* 결과 제목 크기 줄임 */
            font-weight: bold;
            margin-bottom: 15px;
            color: #e1326f;
        }
        .result-description {
            font-size: 13px; /* 결과 설명 글씨 크기 줄임 */
            line-height: 1.5;
            margin-bottom: 20px;
            text-align: center; /* 설명 중앙 정렬 */
        }
        .comment {
            font-size: 11px; /* 코멘트 글씨 크기 줄임 */
            color: #777;
            position: relative; 
            margin-top: 15px;
            width: 90%;
            text-align: center;
        }
        /* 각 문항 아래에 들어갈 이벤트 설명 텍스트 */
        .event-description-text {
            font-size: 11px; /* 푸터 내용보다 살짝 크게 */
            color: #888;
            margin-top: 15px; /* 상단 여백 추가 */
            line-height: 1.3;
            text-align: center; /* 중앙 정렬 */
        }

        /* 공유 메뉴 */
        .share-container { /* 기존 share-menu 역할 */
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px; /* 아이템 간 간격 줄임 */
        }
        .share-btn { /* 기존 share-menu-item 역할 */
            flex: 0 0 auto; /* 내용에 따라 유연하게 */
            margin: 2px;
            white-space: nowrap;
            min-width: fit-content;
            font-size: 11px; /* 글씨 크기 줄임 */
            padding: 6px 10px; /* 패딩 조정 */
            border-radius: 15px; /* 좀 더 둥근 버튼 */
            background-color: #6c757d; /* 공유 버튼은 좀 더 차분한 색 */
        }
        .share-btn:hover {
            background-color: #5a6268;
        }
        /* 진행률 바 */
        .progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 5px;
            height: 8px; /* 높이 줄임 */
            margin-bottom: 15px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0;
            background-color: #ff1493;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* 푸터 */
        footer {
            margin-top: auto; /* flex 컨테이너 내에서 맨 아래로 밀착 */
            padding-top: 15px; /* 상단 패딩 추가 */
            font-size: 10px; /* 푸터 글씨 더 줄임 */
            color: #aaa;
            text-align: center;
            border-top: 1px solid #eee; /* 구분선 추가 */
            padding-bottom: 5px; /* 하단 패딩 */
        }
        footer p { /* 푸터 내 p 태그에 대한 스타일 조정 */
            font-size: 9px; /* 푸터 내용은 더 작게 */
            line-height: 1.2;
            margin-bottom: 3px;
            color: #888;
        }


        /* 모바일 반응형 */
        @media (max-width: 450px) { /* 420px 컨테이너에 맞춰 미디어 쿼리 조정 */
            body {
                padding: 10px;
            }
            .container {
                width: 95vw; /* 화면 너비의 95% 사용 */
                height: 95vw; /* 너비에 맞춘 정사각형 유지 */
                margin: 0 auto;
                padding: 50px 15px 20px 15px; /* 패딩 조정 */
            }
            .page-title {
                font-size: 14px; /* 더 작은 화면에서는 더 줄임 */
            }
            h1 {
                font-size: 16px;
            }
            p {
                font-size: 12px;
            }
            .question {
                font-size: 15px;
            }
            .option {
                font-size: 12px;
                padding: 8px 12px;
            }
            .result-title {
                font-size: 16px;
            }
            .result-description {
                font-size: 12px;
            }
            .share-btn, .restart-btn, button {
                font-size: 12px;
                padding: 6px 10px;
            }
            footer p { /* 모바일 푸터 내용 글씨 크기 */
                font-size: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- 상단 페이지 제목 (컨테이너 외부에 고정) -->
    <div class="page-title">솔로몬의 선택: 내 연애 성향은 에겐? 테토?</div>

    <!-- 인트로 화면 -->
    <div class="container" id="intro">
        <h1>솔로몬의 선택 💘</h1>
        <p>이 테스트는 당신 안의 <strong>에겐(감성/공감 특성)</strong>과 <strong>테토(논리/이성 특성)</strong> 비율을 알아보는 유머러스한 분석입니다.</p>
        <p>사랑 앞에서 내가 왜 이러지? 궁금했다면, 이제 알아볼 시간!</p>
        <p><strong>12가지 문항</strong>에 솔직하게 답하고, 당신의 연애 성향 타입을 확인해보세요.</p>
        <button class="start-btn" id="startBtn">테스트 시작하기</button>
        <div class="comment">
            "너무 깊게 생각하지 마세요! 그저 재미로 즐겨주세요."
            <br>
            "본 테스트는 오락용이며, 실제 과학적 근거와는 무관합니다."
        </div>
        <!-- 인트로 페이지 푸터 내용 완전히 제거 -->
        <footer>
        </footer>
    </div>

    <!-- 질문 화면 -->
    <div class="container" id="questionContainer">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="question" id="questionText"></div>
        <div class="options" id="optionsContainer"></div>
        <!-- 이벤트 설명 텍스트가 여기 동적으로 추가됩니다 -->
        <div class="navigation">
            <button class="prev-btn" id="prevBtn">이전</button>
            <button class="next-btn" id="nextBtn">다음</button>
        </div>
        <!-- 질문 페이지 푸터 내용 완전히 제거 -->
        <footer>
        </footer>
    </div>

    <!-- 결과 화면 -->
    <div class="container" id="resultContainer">
        <div class="result-title" id="resultTitle"></div>
        <div class="result-description" id="resultDescription"></div>
        <div class="share-container">
            <button class="share-btn" id="shareKakao">카카오톡 공유</button>
            <button class="share-btn" id="copyUrl">URL 복사</button>
        </div>
        <button class="restart-btn" id="restartBtn">다시 테스트하기</button>
        <!-- 결과 페이지 푸터 내용 완전히 제거 -->
        <footer>
        </footer>
    </div>

    <script>
        // DOM 요소 가져오기
        const introSection = document.getElementById('intro');
        const questionSection = document.getElementById('questionContainer');
        const resultSection = document.getElementById('resultContainer');
        const startBtn = document.getElementById('startBtn');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.getElementById('progressBar');
        const resultTitle = document.getElementById('resultTitle');
        const resultDescription = document.getElementById('resultDescription');
        const restartBtn = document.getElementById('restartBtn');
        const shareKakaoBtn = document.getElementById('shareKakao');
        const copyUrlBtn = document.getElementById('copyUrl');

        let currentQuestionIndex = 0;
        let userAnswers = []; // 사용자의 답변 (선택한 옵션의 type을 저장)
        let egenScore = 0;
        let tetoScore = 0;

        // 질문 목록 (모두 포함되어 있습니다)
        const questions = [
            {
                question: "1. 연인과 싸우다가 상대방이 '그때 그 파스타집에서 말이야...'라고 운을 띄웠을 때, 당신의 반응은?",
                options: [
                    { text: "흐읍... (아련) 그때 진짜 맛있었지... 그래서 뭘 말하고 싶었던 거야? 파스타가 죄야?", type: "egen" },
                    { text: "잠깐. 파스타집은 지난주 화요일 7시 15분, 네가 '난 봉골레 매니아'라고 말한 그곳이 맞지? 이제 문제의 본질로 돌아오자.", type: "teto" }
                ]
            },
            {
                question: "2. 친구가 대뜸 '야, 나 어제 인생 최대의 현타가 왔잖아!'라고 했을 때, 당신의 속마음은?",
                options: [
                    { text: "'현타가... 왔어? ㅠㅠ 무슨 일이야... 어쩌다... 내가 안아줄게, 엉엉...'", type: "egen" },
                    { text: "'현실 자각 타임. 원인 분석이 필요해. 주식인가? 연애인가? 재정 상태인가?'", type: "teto" }
                ]
            },
            {
                question: "3. 데이트 중 로맨틱 코미디 영화를 보다가 주인공이 이별하는 장면에서 당신의 모습은?",
                options: [
                    { text: "으어어어엉! 흐엉... (휴지를 찾아 헤매며) 저 둘은 이어져야 했어! 이건 슬픈 새드엔딩이야! 엉엉엉!", type: "egen" },
                    { text: "감독의 의도는 저 둘의 관계성보다 개인의 성장 서사에 초점을 둔 것 같군. 감정 과잉은 지양하자.", type: "teto" }
                ]
            },
            {
                question: "4. 애인이 갑자기 '자기야, 나 요즘 살찐 것 같아...'라고 걱정스럽게 말했을 때, 당신의 필살기는?",
                options: [
                    { text: "어딜 봐! 우리 자기 여전히 세상에서 제일 예쁘고 멋있고... 완벽해! 그냥 사랑스럽게 봐줄래?", type: "egen" },
                    { text: "몸무게, 인바디 지표 변화를 먼저 확인해보자. 주 3회 운동 루틴을 추가하고 식단을 바꿔보는 게 어때?", type: "teto" }
                ]
            },
            {
                question: "5. 주말 아침, 애인이 '오늘 뭐 할까?'라고 물어봤을 때, 당신의 머릿속 시뮬레이션은?",
                options: [
                    { text: "'음... 어제 본 영화 감상평을 나누며 따뜻한 라떼를 마시고... 저녁엔 예쁜 야경을 보면서 손 잡고 걷고...'", type: "egen" },
                    { text: "'1안: 전시회 -> 맛집 탐방. 2안: 액티비티 -> 저녁. 3안: 집에서 휴식. 장단점 분석 후 결정하자.'", type: "teto" }
                ]
            },
            {
                question: "6. 친구와 싸우고 화해하려 할 때, 가장 먼저 하는 생각은?",
                options: [
                    { text: "'그 애가 너무 속상했겠지? 내 말이 좀 심했나? ㅠㅠ 편지라도 쓸까? 눈물로 사죄해야지!'", type: "egen" },
                    { text: "'누가 잘못했는지 팩트 확인이 먼저다. 문제의 원인을 파악하고 재발 방지 대책을 강구해야 해.'", type: "teto" }
                ]
            },
            {
                question: "7. 애인이 데이트 룩으로 평소 입지 않던 과감한 의상을 입고 왔을 때, 당신의 반응은?",
                options: [
                    { text: "헉... 자기야...! 완전 섹시... (두근) 오늘 내 심장 괜찮겠어...? 너무 멋있어서 심장이 남아나질 않겠어!", type: "egen" },
                    { text: "소재의 질감과 컬러 조합이 인상적이군. 전반적인 핏은 괜찮으나, 저 액세서리는 과한 감이 없지 않아. 착용 목적은 무엇이지?", type: "teto" }
                ]
            },
            {
                question: "8. 당신은 모임의 총무를 맡았다. 정산 중 138,500원이 남았는데, 남은 돈 처리에 대한 당신의 생각은?",
                options: [
                    { text: "어머! 이걸로 우리 다 같이 예쁜 커피 마시면서 덕담이나 나눌까? 아니면 불우이웃을 돕는 데 쓸까? 마음이 따뜻해진다...", type: "egen" },
                    { text: "138,500원. n분의 1하면 정확히 떨어지지 않는군. 이 금액으로 다음 모임에서 추가 비용을 충당하거나, 회비에서 제하는 방식으로 이월하는 것이 가장 효율적이다.", type: "teto" }
                ]
            },
            {
                question: "9. 새로운 챌린지를 시작했는데, 생각보다 너무 힘들 때, 당신의 행동은?",
                options: [
                    { text: "흑흑... 너무 힘들어... 포기할까? 그래도 조금만 더 해볼까? 옆에서 누가 '잘한다!' 응원해 주면 좋겠다... ㅠㅠ", type: "egen" },
                    { text: "현재 효율 50%. 목표 달성을 위해선 부족해. 시간 배분과 리소스 재분배가 시급하다. 계획을 재조정한다.", type: "teto" }
                ]
            },
            {
                question: "10. 친구와 단둘이 해외여행을 간다! 숙소를 고를 때, 당신의 최우선 고려사항은?",
                options: [
                    { text: "침구가 보송보송하고, 아늑한 분위기에, 창밖으로 예쁜 풍경이 보이고... 아, 감성적인 공간이어야 해!", type: "egen" },
                    { text: "조식 포함 여부, 교통 편의성, 환승 횟수, 주변 편의시설과의 거리, 가격 대비 가성비를 비교하여 최적의 선택을 한다.", type: "teto" }
                ]
            },
            {
                question: "11. 애인이 당신을 위한 깜짝 이벤트를 준비했다. 하지만 당신의 촉은 왠지 모르게 불길하다. 그 이유는?",
                options: [
                    { text: "'아... 왠지 저번처럼 삑사리 나서 나 혼자 감동 먹다 혼자 민망해지는 건 아니겠지? 흑흑... 하지만 그래도 예쁜 마음씨니까 괜찮아!'", type: "egen" },
                    { text: "'일주일 전부터 평소와 다른 패턴의 움직임이 감지됐다. CCTV 분석 결과 특정 쇼핑몰 방문 횟수 증가, 비밀 통화 횟수 증가. 현재 87% 확률로 이벤트 예측.'", type: "teto" }
                ]
            },
            {
                question: "12. 길을 걷다 어딘가에 홀린 듯 비틀거리는 친구를 발견했다. 당신의 외침은?",
                options: [
                    { text: "ㅇ...야... 괜찮아? ㅠㅠ 너 혹시... 사랑에 빠졌니?!!! (감격) 축하해! 누가 그 운명의 상대야?!", type: "egen" },
                    { text: "수분 섭치 부족 또는 혈당 저하. 즉시 편의점에서 이온 음료와 초콜릿을 구매해야 한다. 동선은 이쪽이 최단거리다.", type: "teto" }
                ]
            }
        ];

        // 결과 정의 (모두 포함되어 있습니다)
        const results = {
            'egen_pure': {
                title: "감성 과몰입형 '촉촉한 눈망울' 에겐 💧",
                description: "이 세상 감성은 내가 다 가져간다! 모든 것을 사랑으로 해석하고 감동받는 당신은 진정한 '눈물의 여왕/왕자님'이군요. 길을 가다 낙엽만 봐도 시 한 편을 읊을 것 같은 로맨티시스트! 당신 옆엔 항상 따뜻한 보온병처럼 당신의 감성을 이해해 줄 짝꿍이 필요해요. '드라마 찐팬'인 당신은 연인과의 소소한 일상도 영화처럼 만들어낼 재주꾼이랍니다!"
            },
            'teto_pure': {
                title: "논리 초월형 '팩트 폭격기' 테토 💣",
                description: "감성은 잠시 넣어둬, 나에겐 오직 팩트와 논리, 그리고 효율성뿐! 감성보다는 이성이 지배하는 당신은 '차가운 도시 남자/여자'의 표본입니다. 연애도 비즈니스처럼 계획하고 실행하는 당신은 어쩌면 완벽한 데이트 플래너일지도요? 계산기보다 정확한 당신의 매력을 알아봐 줄, 엉뚱 발랄한 파트너를 만나면 의외의 케미가 터질 수 있어요!"
            },
            'balanced_mixed': {
                title: "반전 매력 뿜뿜 '밀당 고수' 에그또 (EgTo) ☯️",
                description: "감성과 이성 사이를 오가는 당신은 진정한 관계의 달인! 때로는 눈물짓게 만드는 공감 요정이다가, 결정적인 순간엔 칼 같은 이성으로 모두를 놀라게 하는 반전 매력의 소유자군요. 당신의 예측 불가능한 매력에 상대방은 헤어 나올 수 없을 거예요! 하지만 때로는 어떤 모습이 진짜 당신인지 혼란스러울 때도 있으니, 당신의 속마음을 알아줄 섬세한 상대를 만나면 좋겠어요."
            },
            'egen_with_realism': {
                title: "'눈물 흘리면서도 짠테크하는' 현실 공감 에겐 👛",
                description: "당신은 감성의 바다에서 헤엄치지만, 발끝은 언제나 단단한 땅에 닿아있는 현실주의자! 영화 속 이별 장면에 눈물을 펑펑 쏟다가도, 끝나자마자 '저 식당 파스타 비싸겠는데?'라고 생각하는 당신은, 뜨거운 가슴과 차가운 머리를 동시에 가진 매력적인 사람이에요. 로맨틱한 데이트를 꿈꾸지만, 예약 없으면 줄 안 서는 합리적인 선택을 하죠. 당신의 현실적인 면모까지 사랑해 줄 반전 매력의 소유자를 만나보세요!"
            },
            'teto_with_warmth': {
                title: "'겉바속촉' 반전 매력 테토 🐿️",
                description: "겉은 바삭한 차가운 이성의 갑옷을 입고 있지만, 속은 촉촉한 따뜻함으로 가득 찬 당신! 친구가 울면 논리적으로 '울지마, 심장이 1분 동안 37.8kcal를 소비해'라고 말하면서도, 다음 날 몰래 그 친구가 좋아하는 커피를 사다 놓는 유형이 바로 당신입니다. 감정 표현이 서툴러도 당신의 진심은 통하기 마련! 당신의 무심한 듯 섬세한 배려심을 알아봐 줄 눈치 빠른 파트너를 만나면 인생 역전 로맨스가 펼쳐질 거예요!"
            },
            'egen_extreme': {
                title: "'단일 세포' 오직 한 길 에겐 🌸",
                description: "당신은 감성으로 대동단결된, 마치 촉각 세포로만 이루어진 것 같은 순수 에겐! 길거리에서 발 구르는 아이를 보면 함께 구르고 싶은 충동을 느끼죠. '이게 논리적으로 말이 되냐?'는 질문은 당신의 사전에 없어요. 오직 '마음이 시키는 대로!' 당신의 뜨거운 심장을 알아주고, 가끔은 냉철한 조언으로 현실로 데려와 줄 파트너를 만난다면 최강의 팀워크를 자랑할 거예요!"
            },
            'teto_extreme': {
                title: "'단일 세포' 오직 한 길 테토 🤖",
                description: "당신은 AI조차 혀를 내두를 완벽한 논리 회로! 오직 팩트와 데이터, 그리고 효율성만으로 이 세상을 살아가는 로봇 같은 테토입니다. '나 지금 되게 센치해...'라는 말에 '음, 혈액 검사 받아봐야 하는 것 아닌가?'라고 반응하는 당신. 하지만 의외로 당신의 계산적인 모습이 상대방에겐 신뢰감과 든든함으로 다가올 수 있어요. 당신의 철벽 같은 방패를 뚫고 들어올 용감한 감성형 파트너를 찾아보세요!"
            }
        };

        // 새로 추가된 '솔로몬의 선택' 행사 설명 문장 배열
        const eventDescriptions = [
            '‘솔로몬의 선택’은 성남시 청년들이 모여 새로운 인연을 맺는 만남 주선 행사다.',
            '이 행사는 실제 커플이 탄생하고 결혼·출산까지 이어진 사례를 보유하고 있다.',
            '누적 커플 수는 3년간 398쌍에 달한다.',
            '참가자들의 평균 매칭률은 약 49.1%로 높은 수준을 유지하고 있다.',
            '뉴욕타임스, BBC, 로이터 등에서 보도한 공공 만남 행사로는 드문 사례다.',
            'KAIST AI 대학원과 협력한 매칭 프로그램으로 조 편성이 이뤄진다.',
            '로테이션 대화, 연애 코칭 등 다양한 프로그램이 마련되어 있다.',
            '평균 경쟁률은 약 6:1로, 높은 관심을 받고 있는 행사다.',
            '다수의 지자체가 벤치마킹하는 대표적인 만남 행사다.',
            '실제 참가자들로부터 높은 만족도 평가를 받고 있다.',
            '신청 기간 내 지원자 중 100명을 무작위로 선정해 참가 기회를 제공한다.',
            '‘솔로몬의 선택’은 2023년부터 현재까지 지속 운영되고 있다.'
        ];

        // JS 로직
        // 테스트 재시작
        function restartTest() {
            currentQuestionIndex = 0;
            userAnswers = [];
            egenScore = 0;
            tetoScore = 0;
            resultSection.style.display = 'none';
            introSection.style.display = 'flex'; /* flexbox로 변경 */
            progressBar.style.width = '0%'; // 프로그레스 바 초기화
            // 질문 페이지의 옵션 'selected' 클래스 초기화
            const allOptions = document.querySelectorAll('.option');
            allOptions.forEach(option => option.classList.remove('selected'));
            updateNavigationButtons(); // 재시작 시 버튼 상태 초기화
            // 컨테이너 스크롤 상단으로 이동 (결과 페이지에서 스크롤이 내려가 있을 수 있으므로)
            introSection.scrollTop = 0;
            questionSection.scrollTop = 0;
            resultSection.scrollTop = 0;
        }

        // 질문 표시 함수
        function displayQuestion(index) {
            if (index < 0 || index >= questions.length) return;

            currentQuestionIndex = index;
            questionText.innerHTML = questions[currentQuestionIndex].question;
            optionsContainer.innerHTML = ''; // 옵션 초기화

            questions[currentQuestionIndex].options.forEach((option, i) => {
                const optionDiv = document.createElement('div');
                optionDiv.classList.add('option');
                optionDiv.textContent = option.text;
                optionDiv.dataset.type = option.type; // egen 또는 teto 타입 저장
                optionDiv.dataset.index = i; // 옵션 인덱스 저장

                // 이전에 선택한 답변이 있다면 표시
                if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].index === i) {
                    optionDiv.classList.add('selected');
                }

                optionDiv.addEventListener('click', () => selectOption(optionDiv, currentQuestionIndex));
                optionsContainer.appendChild(optionDiv);
            });

            // 각 문항 하단에 이벤트 설명 문장 추가
            // 기존에 추가된 설명이 있다면 제거 후 다시 추가 (이전/다음 버튼으로 이동 시)
            let existingDesc = document.querySelector('.event-description-text');
            if (existingDesc) {
                existingDesc.remove();
            }

            const eventDescParagraph = document.createElement('p');
            eventDescParagraph.classList.add('event-description-text');
            if (eventDescriptions[currentQuestionIndex]) {
                eventDescParagraph.textContent = eventDescriptions[currentQuestionIndex];
            }
            // optionsContainer의 부모(questionContainer)에, optionsContainer 다음에 삽입
            optionsContainer.parentNode.insertBefore(eventDescParagraph, optionsContainer.nextElementSibling);

            updateNavigationButtons();
            updateProgressBar();
            questionSection.scrollTop = 0; // 질문 변경 시 스크롤 상단으로 이동
        }

        // 옵션 선택 함수
        function selectOption(selectedOptionDiv, questionIndex) {
            Array.from(optionsContainer.children).forEach(option => {
                option.classList.remove('selected');
            });
            selectedOptionDiv.classList.add('selected');

            userAnswers[questionIndex] = {
                type: selectedOptionDiv.dataset.type,
                index: parseInt(selectedOptionDiv.dataset.index)
            };
            nextBtn.disabled = false; // 선택 시 다음 버튼 활성화
        }

        // 네비게이션 버튼 업데이트
        function updateNavigationButtons() {
            prevBtn.disabled = (currentQuestionIndex === 0);
            nextBtn.textContent = (currentQuestionIndex === questions.length - 1) ? '결과보기' : '다음';
            nextBtn.disabled = (userAnswers[currentQuestionIndex] === undefined); // 답변 안 했으면 비활성화
        }

        // 진행률 바 업데이트
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // 점수 계산 및 결과 표시
        function calculateAndDisplayResult() {
            egenScore = 0;
            tetoScore = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.type === 'egen') {
                    egenScore++;
                } else if (answer && answer.type === 'teto') {
                    tetoScore++;
                }
            });

            const finalResult = results[getCalculatedResultKey()]; // 현재 결과 타입에 해당하는 결과 객체를 가져옵니다.
            resultTitle.innerHTML = finalResult.title;
            resultDescription.innerHTML = finalResult.description;

            // 질문 페이지의 설명 제거 (결과 페이지로 넘어갈 때)
            let existingDesc = document.querySelector('.event-description-text');
            if (existingDesc) {
                existingDesc.remove();
            }


            // 화면 전환
            questionSection.style.display = 'none';
            resultSection.style.display = 'flex'; /* flexbox로 변경하여 내용 중앙 정렬 */
            resultSection.scrollTop = 0; // 결과 페이지 스크롤 상단으로
        }

        // 현재 계산된 결과 키를 반환하는 헬퍼 함수
        function getCalculatedResultKey() {
            let es = 0;
            let ts = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.type === 'egen') {
                    es++;
                } else if (answer && answer.type === 'teto') {
                    ts++;
                }
            });

            if (es === 12) return 'egen_extreme';
            if (ts === 12) return 'teto_extreme';
            if (es >= 10) return 'egen_pure';
            if (ts >= 10) return 'teto_pure';
            if (es >= 8) return 'egen_with_realism';
            if (ts >= 8) return 'teto_with_warmth';
            return 'balanced_mixed';
        }


        // 이벤트 리스너 설정
        startBtn.addEventListener('click', () => {
            introSection.style.display = 'none';
            questionSection.style.display = 'flex'; /* flexbox로 변경 */
            displayQuestion(currentQuestionIndex);
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                displayQuestion(currentQuestionIndex - 1);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (userAnswers[currentQuestionIndex] !== undefined) {
                if (currentQuestionIndex < questions.length - 1) {
                    displayQuestion(currentQuestionIndex + 1);
                } else {
                    calculateAndDisplayResult();
                }
            } else {
                alert('답변을 선택해주세요!');
            }
        });

        restartBtn.addEventListener('click', restartTest);

        // 카카오톡 공유 기능
        shareKakaoBtn.addEventListener('click', () => {
            if (!Kakao.isInitialized()) {
                alert('카카오톡 SDK가 초기화되지 않았습니다. 개발자 키 설정을 확인해주세요.');
                return;
            }

            const currentResult = results[getCalculatedResultKey()];
            
            Kakao.Share.sendDefault({
                objectType: 'feed',
                content: {
                    title: `[솔로몬의 선택] 내 연애 성향 타입은? ${currentResult.title}`,
                    description: currentResult.description,
                    imageUrl: 'https://cdn.pixabay.com/photo/2016/11/22/19/25/emotions-1850125_1280.png', // 대표 이미지 URL
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href,
                    },
                },
                buttons: [
                    {
                        title: '테스트 시작하기',
                        link: {
                            mobileWebUrl: window.location.href,
                            webUrl: window.location.href,
                        },
                    },
                ],
            });
        });

        // URL 복사 기능
        copyUrlBtn.addEventListener('click', () => {
            const el = document.createElement('textarea');
            el.value = window.location.href;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            alert('테스트 URL이 복사되었습니다!');
        });
    </script>
</body>
</html>
