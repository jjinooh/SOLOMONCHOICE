<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>솔로몬의 선택: 내 연애 호르몬은 에겐? 테토?</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif;
        }
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px; /* 전체적인 여백 추가 */
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 30px; /* 컨테이너 내부 패딩 */
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* 그림자 강화 */
        }
        .intro, .question-container, .result-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            /* box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);  이미 container에 있으니 여기서는 제거 또는 약하게 */
        }
        h1 {
            font-size: 32px; /* 제목 크기 키움 */
            margin-bottom: 25px; /* 제목 아래 여백 증가 */
            color: #333;
            font-weight: 700; /* 글씨 굵게 */
        }
        h1 span {
            color: #ff1493; /* 솔로몬의 선택 부분을 핫핑크로 */
        }
        p {
            font-size: 18px; /* 본문 폰트 크기 키움 */
            margin-bottom: 15px;
            line-height: 1.8; /* 줄 간격 넓힘 */
        }
        .start-btn {
            display: inline-block;
            padding: 15px 40px; /* 버튼 크기 키움 */
            background-color: #ff1493;
            color: white;
            border: none;
            border-radius: 8px; /* 버튼 모서리 둥글게 */
            font-size: 20px; /* 버튼 폰트 크기 키움 */
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s; /* 트랜지션 추가 */
            margin-top: 25px;
            font-weight: bold;
        }
        .start-btn:hover {
            background-color: #e00e84;
            transform: translateY(-2px); /* 호버 시 살짝 떠오르는 효과 */
        }
        .start-btn:active {
            transform: translateY(0); /* 클릭 시 원위치 */
        }

        /* 질문 컨테이너 */
        .question-container {
            display: none;
            padding: 30px;
            margin-bottom: 20px;
            text-align: left; /* 질문과 옵션은 왼쪽 정렬 */
        }
        .question {
            font-size: 22px; /* 질문 텍스트 크기 */
            font-weight: bold;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        .options {
            margin-bottom: 30px;
        }
        .option {
            display: block;
            padding: 15px 20px; /* 옵션 버튼 패딩 */
            margin-bottom: 15px; /* 옵션 간 간격 */
            background-color: #f1f1f1;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s, transform 0.1s;
            font-size: 18px; /* 옵션 텍스트 크기 */
        }
        .option:hover {
            background-color: #e6e6e6;
            transform: translateY(-2px);
        }
        .option.selected {
            background-color: #ff8dc7; /* 선택된 옵션 색상 */
            color: white;
            font-weight: bold;
            border: 2px solid #ff1493; /* 선택 시 테두리 추가 */
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        .prev-btn, .next-btn {
            padding: 12px 25px;
            background-color: #ff1493;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            flex-grow: 1; /* 버튼 너비 동일하게 */
            margin: 0 5px; /* 버튼 사이 간격 */
        }
        .prev-btn:hover, .next-btn:hover {
            background-color: #e00e84;
            transform: translateY(-2px);
        }
        .prev-btn:active, .next-btn:active {
            transform: translateY(0);
        }
        .prev-btn:disabled, .next-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        /* 결과 컨테이너 */
        .result-container {
            display: none;
            padding: 40px 30px; /* 결과 컨테이너 패딩 */
            text-align: center;
        }
        .result-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 25px;
            color: #ff1493;
            line-height: 1.4;
        }
        .result-description {
            font-size: 18px;
            margin-bottom: 35px;
            text-align: center; /* 설명 중앙 정렬 */
            line-height: 1.8;
            word-break: keep-all; /* 단어 단위로 줄바꿈 */
        }
        .share-container {
            margin-top: 30px;
            display: flex;
            flex-wrap: wrap; /* 반응형을 위해 줄바꿈 허용 */
            justify-content: center;
            gap: 15px; /* 버튼 간 간격 */
        }
        .share-btn {
            padding: 10px 20px;
            background-color: #ff1493;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, transform 0.1s;
        }
        .share-btn:hover {
            background-color: #e00e84;
            transform: translateY(-2px);
        }
        .share-btn:active {
            transform: translateY(0);
        }
        .restart-btn {
            margin-top: 30px;
            padding: 15px 30px;
            background-color: #6c757d; /* 재시작 버튼은 다른 색상 */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }
        .restart-btn:hover {
            background-color: #5a6268;
            transform: translateY(-2px);
        }
        .restart-btn:active {
            transform: translateY(0);
        }

        /* 진행률 바 */
        .progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 10px;
            height: 15px;
            margin-bottom: 20px;
            overflow: hidden; /* 내부 바가 튀어나오지 않게 */
        }
        .progress-bar {
            height: 100%;
            width: 0;
            background-color: #ff1493;
            border-radius: 10px;
            transition: width 0.3s ease-in-out; /* 부드러운 애니메이션 */
        }
        .highlight {
            font-weight: bold;
            color: #ff1493;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 14px;
            color: #888;
        }

        /* 반응형 디자인 */
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 24px;
            }
            p {
                font-size: 16px;
            }
            .start-btn {
                padding: 12px 30px;
                font-size: 18px;
            }
            .question {
                font-size: 18px;
            }
            .option {
                font-size: 16px;
                padding: 12px 15px;
            }
            .prev-btn, .next-btn {
                font-size: 16px;
                padding: 10px 20px;
            }
            .result-title {
                font-size: 22px;
            }
            .result-description {
                font-size: 16px;
            }
            .share-btn {
                width: 100%; /* 모바일에서 공유 버튼 너비 100% */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 인트로 화면 -->
        <div class="intro" id="intro">
            <h1><span>솔로몬의 선택:</span> 내 연애 호르몬은 에겐? 테토?</h1>
            <p>이 테스트는 당신 안의 <strong>에겐(감성/공감 호르몬)</strong>과 <strong>테토(논리/이성 호르몬)</strong> 비율을 알아보는 유머러스한 성향 분석입니다.</p>
            <p>사랑 앞에서 내가 왜 이러지? 궁금했다면, 이제 알아볼 시간!</p>
            <p><strong>12가지 문항</strong>에 솔직하게 답하고, 당신의 연애 호르몬 타입을 확인해보세요.</p>
            <button class="start-btn" id="startBtn">테스트 시작하기</button>
        </div>

        <!-- 질문 화면 -->
        <div class="question-container" id="questionContainer">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="question" id="questionText"></div>
            <div class="options" id="optionsContainer"></div>
            <div class="navigation">
                <button class="prev-btn" id="prevBtn">이전</button>
                <button class="next-btn" id="nextBtn">다음</button>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div class="result-container" id="resultContainer">
            <div class="result-title" id="resultTitle"></div>
            <div class="result-description" id="resultDescription"></div>
            <!-- 공유 기능은 이미지 첨부 불가, URL 공유로 변경 -->
            <div class="share-container">
                <button class="share-btn" id="shareKakao">카카오톡 공유</button>
                <button class="share-btn" id="copyUrl">URL 복사</button>
            </div>
            <button class="restart-btn" id="restartBtn">다시 테스트하기</button>
        </div>

        <footer>
            © 2025 솔로몬의 선택. 모든 권리 보유.
        </footer>
    </div>

    <!-- 카카오톡 공유 API (Head 태그 내에 미리 선언하는 것이 더 좋지만, 여기서도 작동은 합니다) -->
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>

    <script>
        // DOM 요소 가져오기
        const introSection = document.getElementById('intro');
        const questionSection = document.getElementById('questionContainer');
        const resultSection = document.getElementById('resultContainer');
        const startBtn = document.getElementById('startBtn');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.getElementById('progressBar');
        const resultTitle = document.getElementById('resultTitle');
        const resultDescription = document.getElementById('resultDescription');
        const restartBtn = document.getElementById('restartBtn');
        const shareKakaoBtn = document.getElementById('shareKakao');
        const copyUrlBtn = document.getElementById('copyUrl');

        let currentQuestionIndex = 0;
        let userAnswers = []; // 사용자의 답변 (선택한 옵션의 type을 저장)
        let egenScore = 0;
        let tetoScore = 0;

        // 질문 목록
        const questions = [
            {
                question: "1. 연인과 싸우다가 상대방이 '그때 그 파스타집에서 말이야...'라고 운을 띄웠을 때, 당신의 반응은?",
                options: [
                    { text: "흐읍... (아련) 그때 진짜 맛있었지... 그래서 뭘 말하고 싶었던 거야? 파스타가 죄야?", type: "egen" },
                    { text: "잠깐. 파스타집은 지난주 화요일 7시 15분, 네가 '난 봉골레 매니아'라고 말한 그곳이 맞지? 이제 문제의 본질로 돌아오자.", type: "teto" }
                ]
            },
            {
                question: "2. 친구가 대뜸 '야, 나 어제 인생 최대의 현타가 왔잖아!'라고 했을 때, 당신의 속마음은?",
                options: [
                    { text: "'현타가... 왔어? ㅠㅠ 무슨 일이야... 어쩌다... 내가 안아줄게, 엉엉...'", type: "egen" },
                    { text: "'현실 자각 타임. 원인 분석이 필요해. 주식인가? 연애인가? 재정 상태인가?'", type: "teto" }
                ]
            },
            {
                question: "3. 데이트 중 로맨틱 코미디 영화를 보다가 주인공이 이별하는 장면에서 당신의 모습은?",
                options: [
                    { text: "으어어어엉! 흐엉... (휴지를 찾아 헤매며) 저 둘은 이어져야 했어! 이건 슬픈 새드엔딩이야! 엉엉엉!", type: "egen" },
                    { text: "감독의 의도는 저 둘의 관계성보다 개인의 성장 서사에 초점을 둔 것 같군. 감정 과잉은 지양하자.", type: "teto" }
                ]
            },
            {
                question: "4. 애인이 갑자기 '자기야, 나 요즘 살찐 것 같아...'라고 걱정스럽게 말했을 때, 당신의 필살기는?",
                options: [
                    { text: "어딜 봐! 우리 자기 여전히 세상에서 제일 예쁘고 멋있고... 완벽해! 그냥 사랑스럽게 봐줄래?", type: "egen" },
                    { text: "몸무게, 인바디 지표 변화를 먼저 확인해보자. 주 3회 운동 루틴을 추가하고 식단을 바꿔보는 게 어때?", type: "teto" }
                ]
            },
            {
                question: "5. 주말 아침, 애인이 '오늘 뭐 할까?'라고 물어봤을 때, 당신의 머릿속 시뮬레이션은?",
                options: [
                    { text: "'음... 어제 본 영화 감상평을 나누며 따뜻한 라떼를 마시고... 저녁엔 예쁜 야경을 보면서 손 잡고 걷고...'", type: "egen" },
                    { text: "'1안: 전시회 -> 맛집 탐방. 2안: 액티비티 -> 저녁. 3안: 집에서 휴식. 장단점 분석 후 결정하자.'", type: "teto" }
                ]
            },
            {
                question: "6. 친구와 싸우고 화해하려 할 때, 가장 먼저 하는 생각은?",
                options: [
                    { text: "'그 애가 너무 속상했겠지? 내 말이 좀 심했나? ㅠㅠ 편지라도 쓸까? 눈물로 사죄해야지!'", type: "egen" },
                    { text: "'누가 잘못했는지 팩트 확인이 먼저다. 문제의 원인을 파악하고 재발 방지 대책을 강구해야 해.'", type: "teto" }
                ]
            },
            {
                question: "7. 애인이 데이트 룩으로 평소 입지 않던 과감한 의상을 입고 왔을 때, 당신의 반응은?",
                options: [
                    { text: "헉... 자기야...! 완전 섹시... (두근) 오늘 내 심장 괜찮겠어...? 너무 멋있어서 심장이 남아나질 않겠어!", type: "egen" },
                    { text: "소재의 질감과 컬러 조합이 인상적이군. 전반적인 핏은 괜찮으나, 저 액세서리는 과한 감이 없지 않아. 착용 목적은 무엇이지?", type: "teto" }
                ]
            },
            {
                question: "8. 당신은 모임의 총무를 맡았다. 정산 중 138,500원이 남았는데, 남은 돈 처리에 대한 당신의 생각은?",
                options: [
                    { text: "어머! 이걸로 우리 다 같이 예쁜 커피 마시면서 덕담이나 나눌까? 아니면 불우이웃을 돕는 데 쓸까? 마음이 따뜻해진다...", type: "egen" },
                    { text: "138,500원. n분의 1하면 정확히 떨어지지 않는군. 이 금액으로 다음 모임에서 추가 비용을 충당하거나, 회비에서 제하는 방식으로 이월하는 것이 가장 효율적이다.", type: "teto" }
                ]
            },
            {
                question: "9. 새로운 챌린지를 시작했는데, 생각보다 너무 힘들 때, 당신의 행동은?",
                options: [
                    { text: "흑흑... 너무 힘들어... 포기할까? 그래도 조금만 더 해볼까? 옆에서 누가 '잘한다!' 응원해 주면 좋겠다... ㅠㅠ", type: "egen" },
                    { text: "현재 효율 50%. 목표 달성을 위해선 부족해. 시간 배분과 리소스 재분배가 시급하다. 계획을 재조정한다.", type: "teto" }
                ]
            },
            {
                question: "10. 친구와 단둘이 해외여행을 간다! 숙소를 고를 때, 당신의 최우선 고려사항은?",
                options: [
                    { text: "침구가 보송보송하고, 아늑한 분위기에, 창밖으로 예쁜 풍경이 보이고... 아, 감성적인 공간이어야 해!", type: "egen" },
                    { text: "조식 포함 여부, 교통 편의성, 환승 횟수, 주변 편의시설과의 거리, 가격 대비 가성비를 비교하여 최적의 선택을 한다.", type: "teto" }
                ]
            },
            {
                question: "11. 애인이 당신을 위한 깜짝 이벤트를 준비했다. 하지만 당신의 촉은 왠지 모르게 불길하다. 그 이유는?",
                options: [
                    { text: "'아... 왠지 저번처럼 삑사리 나서 나 혼자 감동 먹다 혼자 민망해지는 건 아니겠지? 흑흑... 하지만 그래도 예쁜 마음씨니까 괜찮아!'", type: "egen" },
                    { text: "'일주일 전부터 평소와 다른 패턴의 움직임이 감지됐다. CCTV 분석 결과 특정 쇼핑몰 방문 횟수 증가, 비밀 통화 횟수 증가. 현재 87% 확률로 이벤트 예측.'", type: "teto" }
                ]
            },
            {
                question: "12. 길을 걷다 어딘가에 홀린 듯 비틀거리는 친구를 발견했다. 당신의 외침은?",
                options: [
                    { text: "ㅇ...야... 괜찮아? ㅠㅠ 너 혹시... 사랑에 빠졌니?!!! (감격) 축하해! 누가 그 운명의 상대야?!", type: "egen" },
                    { text: "수분 섭취 부족 또는 혈당 저하. 즉시 편의점에서 이온 음료와 초콜릿을 구매해야 한다. 동선은 이쪽이 최단거리다.", type: "teto" }
                ]
            }
        ];

        // 결과 정의
        const results = {
            'egen_pure': {
                title: "감성 과몰입형 '촉촉한 눈망울' 에겐 EMOJI_0",
                description: "이 세상 감성은 내가 다 가져간다! 모든 것을 사랑으로 해석하고 감동받는 당신은 진정한 '눈물의 여왕/왕자님'이군요. 길을 가다 낙엽만 봐도 시 한 편을 읊을 것 같은 로맨티시스트! 당신 옆엔 항상 따뜻한 보온병처럼 당신의 감성을 이해해 줄 짝꿍이 필요해요. '드라마 찐팬'인 당신은 연인과의 소소한 일상도 영화처럼 만들어낼 재주꾼이랍니다!"
            },
            'teto_pure': {
                title: "논리 초월형 '팩트 폭격기' 테토 EMOJI_1",
                description: "감성은 잠시 넣어둬, 나에겐 오직 팩트와 논리, 그리고 효율성뿐! 감성보다는 이성이 지배하는 당신은 '차가운 도시 남자/여자'의 표본입니다. 연애도 비즈니스처럼 계획하고 실행하는 당신은 어쩌면 완벽한 데이트 플래너일지도요? 계산기보다 정확한 당신의 매력을 알아봐 줄, 엉뚱 발랄한 파트너를 만나면 의외의 케미가 터질 수 있어요!"
            },
            'balanced_mixed': {
                title: "반전 매력 뿜뿜 '밀당 고수' 에그또 (EgTo) ☯️",
                description: "감성과 이성 사이를 오가는 당신은 진정한 관계의 달인! 때로는 눈물짓게 만드는 공감 요정이다가, 결정적인 순간엔 칼 같은 이성으로 모두를 놀라게 하는 반전 매력의 소유자군요. 당신의 예측 불가능한 매력에 상대방은 헤어 나올 수 없을 거예요! 하지만 때로는 어떤 모습이 진짜 당신인지 혼란스러울 때도 있으니, 당신의 속마음을 알아줄 섬세한 상대를 만나면 좋겠어요."
            },
            'egen_with_realism': {
                title: "'눈물 흘리면서도 짠테크하는' 현실 공감 에겐 EMOJI_2",
                description: "당신은 감성의 바다에서 헤엄치지만, 발끝은 언제나 단단한 땅에 닿아있는 현실주의자! 영화 속 이별 장면에 눈물을 펑펑 쏟다가도, 끝나자마자 '저 식당 파스타 비싸겠는데?'라고 생각하는 당신은, 뜨거운 가슴과 차가운 머리를 동시에 가진 매력적인 사람이에요. 로맨틱한 데이트를 꿈꾸지만, 예약 없으면 줄 안 서는 합리적인 선택을 하죠. 당신의 현실적인 면모까지 사랑해 줄 반전 매력의 소유자를 만나보세요!"
            },
            'teto_with_warmth': {
                title: "'겉바속촉' 반전 매력 테토 EMOJI_3",
                description: "겉은 바삭한 차가운 이성의 갑옷을 입고 있지만, 속은 촉촉한 따뜻함으로 가득 찬 당신! 친구가 울면 논리적으로 '울지마, 심장이 1분 동안 37.8kcal를 소비해'라고 말하면서도, 다음 날 몰래 그 친구가 좋아하는 커피를 사다 놓는 유형이 바로 당신입니다. 감정 표현이 서툴러도 당신의 진심은 통하기 마련! 당신의 무심한 듯 섬세한 배려심을 알아봐 줄 눈치 빠른 파트너를 만나면 인생 역전 로맨스가 펼쳐질 거예요!"
            },
            'egen_extreme': {
                title: "'단일 세포' 오직 한 길 에겐 EMOJI_4",
                description: "당신은 감성으로 대동단결된, 마치 촉각 세포로만 이루어진 것 같은 순수 에겐! 길거리에서 발 구르는 아이를 보면 함께 구르고 싶은 충동을 느끼죠. '이게 논리적으로 말이 되냐?'는 질문은 당신의 사전에 없어요. 오직 '마음이 시키는 대로!' 당신의 뜨거운 심장을 알아주고, 가끔은 냉철한 조언으로 현실로 데려와 줄 파트너를 만난다면 최강의 팀워크를 자랑할 거예요!"
            },
            'teto_extreme': {
                title: "'단일 세포' 오직 한 길 테토 EMOJI_5",
                description: "당신은 AI조차 혀를 내두를 완벽한 논리 회로! 오직 팩트와 데이터, 그리고 효율성만으로 이 세상을 살아가는 로봇 같은 테토입니다. '나 지금 되게 센치해...'라는 말에 '음, 혈액 검사 받아봐야 하는 것 아닌가?'라고 반응하는 당신. 하지만 의외로 당신의 계산적인 모습이 상대방에겐 신뢰감과 든든함으로 다가올 수 있어요. 당신의 철벽 같은 방패를 뚫고 들어올 용감한 감성형 파트너를 찾아보세요!"
            }
        };

        // 카카오 SDK 초기화
        function initKakao() {
            if (Kakao.isInitialized()) {
                console.log('Kakao SDK already initialized.');
                return;
            }
            // YOUR_APP_KEY를 카카오 개발자 센터에서 발급받은 실제 앱 키로 교체해주세요!
            // 호호님의 앱키가 없다면 아래 '테스트용' 키를 사용하거나, 새 앱을 만들어 발급받으세요.
            // 권장: 웹 플랫폼 설정에 도메인 추가 (localhost 또는 배포될 실제 도메인)
            Kakao.init('YOUR_JAVASCRIPT_APP_KEY');
            console.log(Kakao.isInitialized()); // true가 나오면 초기화 성공
        }

        // 질문 표시 함수
        function displayQuestion(index) {
            if (index < 0 || index >= questions.length) return;

            currentQuestionIndex = index;
            questionText.innerHTML = questions[currentQuestionIndex].question;
            optionsContainer.innerHTML = ''; // 옵션 초기화

            questions[currentQuestionIndex].options.forEach((option, i) => {
                const optionDiv = document.createElement('div');
                optionDiv.classList.add('option');
                optionDiv.textContent = option.text;
                optionDiv.dataset.type = option.type; // egen 또는 teto 타입 저장
                optionDiv.dataset.index = i; // 옵션 인덱스 저장

                // 이전에 선택한 답변이 있다면 표시
                if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].index === i) {
                    optionDiv.classList.add('selected');
                }

                optionDiv.addEventListener('click', () => selectOption(optionDiv, currentQuestionIndex));
                optionsContainer.appendChild(optionDiv);
            });

            updateNavigationButtons();
            updateProgressBar();
        }

        // 옵션 선택 함수
        function selectOption(selectedOptionDiv, questionIndex) {
            // 현재 질문의 모든 옵션에서 'selected' 클래스 제거
            Array.from(optionsContainer.children).forEach(option => {
                option.classList.remove('selected');
            });
            // 선택된 옵션에 'selected' 클래스 추가
            selectedOptionDiv.classList.add('selected');

            // 사용자의 답변 저장
            userAnswers[questionIndex] = {
                type: selectedOptionDiv.dataset.type,
                index: parseInt(selectedOptionDiv.dataset.index)
            };

            // 마지막 질문인 경우 자동 계산 & 결과 표시
            if (questionIndex === questions.length - 1) {
                setTimeout(() => { // 선택 시 즉시 이동하기 위해 setTimeout
                    calculateAndDisplayResult();
                }, 300); // 0.3초 딜레이 후 결과 페이지로 이동
            }
        }

        // 네비게이션 버튼 업데이트
        function updateNavigationButtons() {
            prevBtn.disabled = (currentQuestionIndex === 0);
            nextBtn.textContent = (currentQuestionIndex === questions.length - 1) ? '결과보기' : '다음';
            nextBtn.disabled = !userAnswers[currentQuestionIndex]; // 현재 질문에 답해야 다음으로 넘어갈 수 있음
        }

        // 진행률 바 업데이트
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // 점수 계산 및 결과 표시
        function calculateAndDisplayResult() {
            egenScore = 0;
            tetoScore = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.type === 'egen') {
                    egenScore++;
                } else if (answer && answer.type === 'teto') {
                    tetoScore++;
                }
            });

            let resultKey;
            // 결과 유형 로직 (호호님과 논의했던 기준에 따라 매핑)
            if (egenScore === 12) {
                resultKey = 'egen_extreme';
            } else if (tetoScore === 12) {
                resultKey = 'teto_extreme';
            } else if (egenScore >= 10) { // 10, 11
                resultKey = 'egen_pure';
            } else if (tetoScore >= 10) { // 10, 11
                resultKey = 'teto_pure';
            } else if (egenScore >= 8) { // 8, 9
                resultKey = 'egen_with_realism';
            } else if (tetoScore >= 8) { // 8, 9
                resultKey = 'teto_with_warmth';
            } else { // 0~7
                // 에겐과 테토 점수가 비슷하게 분포된 경우 (예: 5~7점)
                resultKey = 'balanced_mixed';
            }
            
            const finalResult = results[resultKey];
            resultTitle.innerHTML = finalResult.title;
            resultDescription.innerHTML = finalResult.description;

            // 화면 전환
            questionSection.style.display = 'none';
            resultSection.style.display = 'block';
        }

        // 테스트 재시작
        function restartTest() {
            currentQuestionIndex = 0;
            userAnswers = [];
            egenScore = 0;
            tetoScore = 0;
            resultSection.style.display = 'none';
            introSection.style.display = 'block';
            progressBar.style.width = '0%'; // 프로그레스 바 초기화
            // 선택된 옵션들 초기화 (다음 시작 시 문제가 안생기도록)
            Array.from(optionsContainer.children).forEach(option => {
                option.classList.remove('selected');
            });
        }

        // 이벤트 리스너 설정
        startBtn.addEventListener('click', () => {
            initKakao(); // 테스트 시작 시 카카오 SDK 초기화
            introSection.style.display = 'none';
            questionSection.style.display = 'block';
            displayQuestion(currentQuestionIndex);
        });

        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                displayQuestion(currentQuestionIndex - 1);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (userAnswers[currentQuestionIndex]) { // 현재 질문에 답을 했는지 확인
                if (currentQuestionIndex < questions.length - 1) {
                    displayQuestion(currentQuestionIndex + 1);
                } else {
                    calculateAndDisplayResult();
                }
            } else {
                alert('답변을 선택해주세요!');
            }
        });

        restartBtn.addEventListener('click', restartTest);

        // 카카오톡 공유 기능
        shareKakaoBtn.addEventListener('click', () => {
            if (!Kakao.isInitialized()) {
                alert('카카오톡 SDK가 초기화되지 않았습니다. 잠시 후 다시 시도해주세요.');
                return;
            }

            const currentResult = results[getCalculatedResultKey()]; // 현재 결과 타입에 해당하는 결과 객체를 가져옵니다.
            
            Kakao.Share.sendDefault({
                objectType: 'feed',
                content: {
                    title: `[솔로몬의 선택] 내 연애 호르몬 타입은? ${currentResult.title}`,
                    description: currentResult.description,
                    imageUrl: 'https://cdn.pixabay.com/photo/2016/11/22/19/25/emotions-1850125_1280.png', // 호호님의 행사나 테스트를 대표할 만한 이미지 URL로 변경해주세요!
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href,
                    },
                },
                buttons: [
                    {
                        title: '테스트 시작하기',
                        link: {
                            mobileWebUrl: window.location.href,
                            webUrl: window.location.href,
                        },
                    },
                ],
            });
        });

        // 현재 계산된 결과 키를 반환하는 헬퍼 함수
        function getCalculatedResultKey() {
            let es = 0;
            let ts = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.type === 'egen') {
                    es++;
                } else if (answer && answer.type === 'teto') {
                    ts++;
                }
            });

            if (es === 12) return 'egen_extreme';
            if (ts === 12) return 'teto_extreme';
            if (es >= 10) return 'egen_pure';
            if (ts >= 10) return 'teto_pure';
            if (es >= 8) return 'egen_with_realism';
            if (ts >= 8) return 'teto_with_warmth';
            return 'balanced_mixed';
        }

        // URL 복사 기능
        copyUrlBtn.addEventListener('click', () => {
            const el = document.createElement('textarea');
            el.value = window.location.href;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            alert('테스트 URL이 복사되었습니다!');
        });

        // 페이지 로드 시 초기화
        window.addEventListener('load', initKakao);
    </script>
</body>
</html>